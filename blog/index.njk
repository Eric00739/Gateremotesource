---
pagination:
  data: collections.posts
  size: 12
  alias: posts
  reverse: true
  addAllPagesToCollections: true
permalink: "blog/{% if pagination.pageNumber > 0 %}page/{{ pagination.pageNumber + 1 }}/{% endif %}index.html"
lang: en
---
<!DOCTYPE html>
<html lang="{{ lang or site.lang }}" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="meta-title">{{ site.blogTitle }} | GateRemoteSource</title>
    <meta id="meta-description" name="description" content="{{ site.blogDescription }}">
    <meta id="meta-keywords" name="keywords" content="Garage Remote Programming, Locksmith Resources, Gate Installation Guides, Technical Tutorials, Access Control Blog">
    <meta name="author" content="GateRemoteSource">
    {% if page.url | canonicalPath %}
    <link rel="canonical" href="{{ site.url }}{{ page.url | canonicalPath }}">
    {% endif %}

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Schema.org 结构化数据 -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Blog",
        "name": "{{ site.blogTitle }}",
        "description": "{{ site.blogDescription }}",
        "url": "{{ site.url }}{{ page.url | canonicalPath }}",
        "inLanguage": "{{ lang or site.lang }}",
        {% if pagination.pageNumber == 0 %}
        "blogPost": [
            {% set featured = collections.posts | getFeatured %}
            {% set schemaPosts = posts | slice(0, 5) %}
            {% if featured %}
            {
                "@type": "BlogPosting",
                "@id": "{{ site.url }}{{ featured.url | canonicalPath }}",
                "headline": "{{ featured.data.title | escape }}",
                "description": "{{ featured.data.summary | escape }}",
                "image": "{{ site.url }}{{ featured.data.hero_image | safeImage('/assets/factory/team.webp') }}",
                "author": {
                    "@type": "Person",
                    "name": "{{ featured.data.author }}"
                },
                "datePublished": "{{ featured.date | htmlDate }}",
                "category": "{{ featured.data.category }}",
                "url": "{{ site.url }}{{ featured.url | canonicalPath }}"
            }{% if schemaPosts.length %},{% endif %}
            {% endif %}
            {% for post in schemaPosts %}
            {
                "@type": "BlogPosting",
                "@id": "{{ site.url }}{{ post.url | canonicalPath }}",
                "headline": "{{ post.data.title | escape }}",
                "description": "{{ post.data.summary | escape }}",
                "image": "{{ site.url }}{{ post.data.hero_image | safeImage('/assets/factory/team.webp') }}",
                "author": {
                    "@type": "Organization",
                    "name": "{{ post.data.author }}"
                },
                "datePublished": "{{ post.date | htmlDate }}",
                "category": "{{ post.data.category }}",
                "url": "{{ site.url }}{{ post.url | canonicalPath }}"
            }{% if not loop.last %},{% endif %}
            {% endfor %}
        ]
        {% endif %}
    }
    </script>

    <link rel="alternate" href="{{ site.url }}{{ page.url | langUrl(i18n.defaultLang) | canonicalPath }}" hreflang="x-default">
    {% for code in i18n.languages %}
    <link rel="alternate" href="{{ site.url }}{{ page.url | langUrl(code) | canonicalPath }}" hreflang="{{ code }}">
    {% endfor %}

    <script>
        (function() {
            "use strict";
            var preferredHost = "www.gateremotesource.com";
            var currentProtocol = location.protocol;
            var currentHost = location.hostname;

            if (currentProtocol !== "https:") {
                var target = "https://" + currentHost + location.pathname + location.search + location.hash;
                if (target !== location.href) {
                    location.replace(target);
                }
                return;
            }

            if (currentHost !== preferredHost) {
                var target = "https://" + preferredHost + location.pathname + location.search + location.hash;
                if (target !== location.href) {
                    location.replace(target);
                }
            }
        })();
    </script>

    <meta property="og:type" content="website">
    <meta property="og:site_name" content="{{ site.name }}">
    <meta property="og:locale" content="en_US">
    <meta property="og:title" content="{{ site.blogTitle }} | GateRemoteSource">
    <meta property="og:description" content="{{ site.blogDescription }}">
    <meta property="og:url" content="{{ site.url }}{{ page.url | canonicalPath }}">
    <meta property="og:image" content="{{ site.url }}/logo/logo.png">
    <meta property="og:image:alt" content="{{ site.name }} logo">
    <meta property="og:image:width" content="1024">
    <meta property="og:image:height" content="1024">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ site.blogTitle }} | GateRemoteSource">
    <meta name="twitter:description" content="{{ site.blogDescription }}">
    <meta name="twitter:image" content="{{ site.url }}/logo/logo.png">

    <link rel="icon" type="image/x-icon" href="/logo/favicon.ico?v=1" sizes="48x48">
    <link rel="icon" type="image/png" sizes="32x32" href="/logo/favicon-32.png?v=1">
    <link rel="icon" type="image/png" sizes="16x16" href="/logo/favicon-16.png?v=1">
    <link rel="apple-touch-icon" sizes="180x180" href="/logo/apple-touch-icon.png?v=1">
    <link rel="manifest" href="/site.webmanifest?v=1">
    <meta name="theme-color" content="#0071E3">

    <!-- Critical CSS inline -->
    <link rel="preload" href="/assets/css/tailwind.css" as="style">
    <link rel="stylesheet" href="/assets/css/tailwind.css">
    <noscript><link rel="stylesheet" href="/assets/css/tailwind.css"></noscript>

    <link rel="preload" href="/assets/vendor/fontawesome/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/assets/vendor/fontawesome/css/all.min.css"></noscript>

    <link rel="preload" href="/assets/css/fonts.css" as="style">
    <link rel="stylesheet" href="/assets/css/fonts.css">
    <noscript><link rel="stylesheet" href="/assets/css/fonts.css"></noscript>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZF8T77R309"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-ZF8T77R309');
    </script>

    <style>
        /* Custom scrollbar for WebKit browsers - Refined */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(0, 123, 255, 0.3); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(0, 123, 255, 0.5); }

        /* Navigation glass effect - Perfected */
        .nav-glass {
            background: rgba(255, 255, 255, 0.8);
            border-bottom: 1px solid rgba(0, 0, 0, 0.04);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
        }

        .nav-link {
            position: relative;
            transition: color 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: #007BFF;
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-link.active {
            color: #0071E3 !important;
            font-weight: 600;
        }

        .nav-link.active::after {
            width: 100%;
        }

        /* Topic filter button styles - Compact pill */
        .topic-filter-btn {
            transition: all 0.2s ease;
            color: #1D1D1F;
            background: transparent;
            border: 1px solid transparent;
        }

        .topic-filter-btn:hover {
            color: #1D1D1F;
            background: rgba(255, 255, 255, 0.9);
            border-color: #D1D1D6;
        }

        .topic-filter-btn.active {
            background-color: #0071E3 !important;
            color: #ffffff !important;
            border-color: #0071E3 !important;
        }

        .topic-filter-btn:focus-visible {
            outline: 2px solid #0071E3;
            outline-offset: 2px;
        }

        /* Skip link for accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #0071E3;
            color: white;
            padding: 10px 16px;
            z-index: 100;
            transition: top 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
            font-size: 0.875rem;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Responsive grid overrides */
        @media (max-width: 1024px) {
            .blog-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 640px) {
            .blog-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Focus visible styles for keyboard navigation */
        *:focus-visible {
            outline: 2px solid #0071E3;
            outline-offset: 2px;
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Enhanced search input */
        #blogSearch {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #blogSearch:focus {
            box-shadow: 0 0 0 3px rgba(0, 113, 227, 0.1);
        }

        /* Button hover effects - Refined */
        .btn-primary {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-primary:hover {
            transform: translateY(-1px);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        /* WhatsApp button - Enhanced */
        .whatsapp-float {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .whatsapp-float:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 113, 227, 0.3);
        }

        /* Typography refinements */
        h1 {
            letter-spacing: -0.02em;
            line-height: 1.1;
        }

        h2 {
            letter-spacing: -0.01em;
            line-height: 1.2;
        }

        h3 {
            letter-spacing: -0.01em;
            line-height: 1.3;
        }

        /* Featured section enhancements */
        .featured-badge {
            background: linear-gradient(135deg, #0071E3 0%, #005BB5 100%);
            box-shadow: 0 2px 8px rgba(0, 113, 227, 0.3);
        }

        /* Link animations */
        a {
            transition: color 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Smooth image loading - Only for loading images */
        img:not([src]) {
            background: linear-gradient(90deg, #F5F5F7 0%, #E8E8ED 50%, #F5F5F7 100%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body class="font-sans text-brand-dark/80 bg-white backdrop-blur selection:bg-brand-accent selection:text-white flex flex-col min-h-screen">
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 nav-glass transition-all duration-300" role="navigation" aria-label="Main navigation">
        <div class="max-w-7xl mx-auto px-5 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center gap-3">
                    <a href="/" class="flex items-center gap-3" aria-label="GateRemoteSource Home">
                        <div class="bg-brand-surface border border-brand-border/50 p-1 rounded-lg h-7 w-7 flex items-center justify-center shadow-sm hover:shadow-md transition-shadow duration-200">
                            <img src="/logo/logo.png" width="28" height="28" alt="GateRemoteSource Logo" class="h-full w-full object-contain">
                        </div>
                        <span class="font-bold text-lg text-brand-dark tracking-tight">GateRemote<span class="text-brand-accent">Source</span></span>
                    </a>
                </div>

                <!-- Desktop Navigation -->
                <div class="hidden lg:flex space-x-1 items-center">
                    <a href="/" class="nav-link text-brand-dark/90 hover:text-brand-accent transition font-medium py-2 px-3 text-sm">Home</a>
                    <a href="/catalog/" class="nav-link text-brand-dark/90 hover:text-brand-accent transition font-medium py-2 px-3 text-sm">Catalog</a>
                    <a href="/oem/" class="nav-link text-brand-dark/90 hover:text-brand-accent transition font-medium py-2 px-3 text-sm">OEM/ODM</a>
                    <a href="/about/" class="nav-link text-brand-dark/90 hover:text-brand-accent transition font-medium py-2 px-3 text-sm">About</a>
                    <a href="/blog/" class="nav-link text-brand-dark/90 hover:text-brand-accent transition font-medium py-2 px-3 text-sm active" aria-current="page">Blog</a>
                    <a href="/contact/" class="nav-link text-brand-dark/90 hover:text-brand-accent transition font-medium py-2 px-3 text-sm">Contact</a>

                    <!-- Language Selector -->
                    <div class="flex items-center ml-2 border-l border-brand-border pl-4">
                        <div class="relative">
                            <button id="languageDropdownBtn" class="flex items-center gap-2 text-brand-dark hover:text-brand-accent transition" type="button" aria-haspopup="true" aria-expanded="false" aria-label="Select language">
                                <span id="currentFlag" class="text-xs font-semibold tracking-wide">EN</span>
                                <span id="currentLang" class="text-sm">English</span>
                                <i class="fa-solid fa-chevron-down text-xs" aria-hidden="true"></i>
                            </button>
                            <div id="languageDropdown" class="absolute right-0 mt-2 w-48 bg-brand-surface border border-brand-border rounded-lg shadow-lg hidden z-50 backdrop-blur" role="menu" aria-labelledby="languageDropdownBtn">
                                <a href="#" onclick="changeLanguage('en')" class="flex items-center gap-3 px-4 py-3 text-brand-dark hover:bg-brand-light transition" role="menuitem" lang="en">
                                    <span class="text-xs font-semibold">EN</span>
                                    <span class="text-brand-dark">English</span>
                                </a>
                                <a href="#" onclick="changeLanguage('es')" class="flex items-center gap-3 px-4 py-3 text-brand-dark hover:bg-brand-light transition" role="menuitem" lang="es">
                                    <span class="text-xs font-semibold">ES</span>
                                    <span class="text-brand-dark">Español</span>
                                </a>
                                <a href="#" onclick="changeLanguage('de')" class="flex items-center gap-3 px-4 py-3 text-brand-dark hover:bg-brand-light transition" role="menuitem" lang="de">
                                    <span class="text-xs font-semibold">DE</span>
                                    <span class="text-brand-dark">Deutsch</span>
                                </a>
                                <a href="#" onclick="changeLanguage('it')" class="flex items-center gap-3 px-4 py-3 text-brand-dark hover:bg-brand-light transition" role="menuitem" lang="it">
                                    <span class="text-xs font-semibold">IT</span>
                                    <span class="text-brand-dark">Italiano</span>
                                </a>
                                <a href="#" onclick="changeLanguage('fr')" class="flex items-center gap-3 px-4 py-3 text-brand-dark hover:bg-brand-light transition" role="menuitem" lang="fr">
                                    <span class="text-xs font-semibold">FR</span>
                                    <span class="text-brand-dark">Français</span>
                                </a>
                                <a href="#" onclick="changeLanguage('pt')" class="flex items-center gap-3 px-4 py-3 text-brand-dark hover:bg-brand-light transition" role="menuitem" lang="pt">
                                    <span class="text-xs font-semibold">PT</span>
                                    <span class="text-brand-dark">Português</span>
                                </a>
                            </div>
                        </div>
                    </div>

                    <a href="/contact/" class="btn-primary bg-brand-quote hover:bg-brand-quoteHover text-brand-surface px-5 py-2.5 rounded-xl font-semibold transition shadow-md shadow-brand-cta/20 hover:shadow-lg text-sm">
                        Quote now
                    </a>
                </div>

                <!-- Mobile Menu Button -->
                <div class="lg:hidden flex items-center gap-4">
                    <button id="mobile-menu-btn" class="text-brand-dark text-2xl p-2 hover:bg-brand-light/50 rounded-lg transition" type="button" aria-label="Toggle mobile menu" aria-expanded="false" aria-controls="mobile-menu">
                        <i class="fa-solid fa-bars" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="lg:hidden bg-brand-surface/95 border-b border-brand-border hidden backdrop-blur" role="menu" aria-label="Mobile navigation">
            <div class="px-4 pt-2 pb-6 space-y-2">
                <a href="/" class="block px-3 py-3 rounded-md text-base font-semibold text-brand-dark hover:bg-brand-light hover:text-brand-accent" role="menuitem">Home</a>
                <a href="/catalog/" class="block px-3 py-3 rounded-md text-base font-semibold text-brand-dark hover:bg-brand-light hover:text-brand-accent" role="menuitem">Catalog</a>
                <a href="/oem/" class="block px-3 py-3 rounded-md text-base font-semibold text-brand-dark hover:bg-brand-light hover:text-brand-accent" role="menuitem">OEM/ODM</a>
                <a href="/about/" class="block px-3 py-3 rounded-md text-base font-semibold text-brand-dark hover:bg-brand-light hover:text-brand-accent" role="menuitem">About</a>
                <a href="/blog/" class="block px-3 py-3 rounded-md text-base font-semibold text-brand-dark hover:bg-brand-light hover:text-brand-accent" role="menuitem" aria-current="page">Blog</a>
                <a href="/contact/" class="block px-3 py-3 rounded-md text-base font-semibold text-brand-quote font-bold" role="menuitem">Quote now</a>
                <div class="pt-4 border-t border-brand-border">
                    <p class="px-3 text-xs uppercase tracking-wide text-brand-light/60 mb-2">Language</p>
                    <div class="px-3 flex flex-wrap gap-2">
                        <button type="button" onclick="changeLanguage('en')" class="px-4 py-2 text-sm font-semibold text-brand-dark hover:text-brand-accent hover:bg-brand-light rounded-md transition" aria-label="Switch to English">EN</button>
                        <button type="button" onclick="changeLanguage('es')" class="px-4 py-2 text-sm font-semibold text-brand-dark hover:text-brand-accent hover:bg-brand-light rounded-md transition" aria-label="Cambiar a español">ES</button>
                        <button type="button" onclick="changeLanguage('de')" class="px-4 py-2 text-sm font-semibold text-brand-dark hover:text-brand-accent hover:bg-brand-light rounded-md transition" aria-label="Wechseln zu Deutsch">DE</button>
                        <button type="button" onclick="changeLanguage('it')" class="px-4 py-2 text-sm font-semibold text-brand-dark hover:text-brand-accent hover:bg-brand-light rounded-md transition" aria-label="Passa all'italiano">IT</button>
                        <button type="button" onclick="changeLanguage('fr')" class="px-4 py-2 text-sm font-semibold text-brand-dark hover:text-brand-accent hover:bg-brand-light rounded-md transition" aria-label="Passer au français">FR</button>
                        <button type="button" onclick="changeLanguage('pt')" class="px-4 py-2 text-sm font-semibold text-brand-dark hover:text-brand-accent hover:bg-brand-light rounded-md transition" aria-label="Mudar para português">PT</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="pt-16 pb-20 bg-white min-h-screen scroll-mt-16" role="main">
        <!-- Topic Filter Navigation Bar -->
        <section class="border-b border-brand-border/60 bg-brand-light sticky top-16 z-40" aria-label="Article filters">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 py-4">
                    <div class="flex items-center gap-2 overflow-x-auto pb-1 lg:pb-0" role="tablist" aria-label="Topic filters">
                        <button type="button" class="topic-filter-btn active px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition-colors" data-topic="all" aria-pressed="true">
                            All
                        </button>
                        <button type="button" class="topic-filter-btn px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition-colors" data-topic="technical-guides" aria-pressed="false">
                            Technical Guides
                        </button>
                        <button type="button" class="topic-filter-btn px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition-colors" data-topic="case-studies" aria-pressed="false">
                            Case Studies
                        </button>
                        <button type="button" class="topic-filter-btn px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition-colors" data-topic="industry-news" aria-pressed="false">
                            Industry News
                        </button>
                        <button type="button" class="topic-filter-btn px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition-colors" data-topic="rf-basics" aria-pressed="false">
                            RF Basics
                        </button>
                        <button type="button" class="topic-filter-btn px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition-colors" data-topic="installation-guides" aria-pressed="false">
                            Installation Guides
                        </button>
                        <button type="button" class="topic-filter-btn px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition-colors" data-topic="programming" aria-pressed="false">
                            Programming
                        </button>
                    </div>

                    <div class="relative w-full lg:w-64">
                        <label for="blogSearch" class="sr-only">Search articles</label>
                        <input type="search" id="blogSearch" placeholder="Search articles..." class="w-full bg-brand-surface border border-brand-border/60 rounded-lg pl-10 pr-4 py-2.5 text-sm text-brand-dark focus:border-brand-accent focus:ring-2 focus:ring-brand-accent/20 outline-none transition-all placeholder:text-brand-muted">
                        <i class="fa-solid fa-search absolute left-3 top-3 text-brand-muted text-sm" aria-hidden="true"></i>
                    </div>
                </div>
            </div>
        </section>

        <!-- Breadcrumb Navigation for SEO - Silicon Labs: Minimal -->
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3" aria-label="Breadcrumb">
            <ol class="flex items-center space-x-2 text-sm" role="list">
                <li>
                    <a href="/" class="text-gray-500 hover:text-gray-900 transition-colors" rel="home">
                        Home
                    </a>
                </li>
                <li class="text-gray-400">/</li>
                <li>
                    <span class="text-gray-900 font-medium" aria-current="page">Blog</span>
                </li>
            </ol>
        </nav>

        {% set featured = collections.posts | getFeatured %}
        {% set primaryFeatured = featured %}
        {% if not primaryFeatured and (posts | length) %}
            {% set primaryFeatured = posts[0] %}
        {% endif %}
        {% set visiblePosts = posts %}
        {% if pagination.pageNumber == 0 %}
            {% if featured %}
                {% set visiblePosts = posts | excludeFeatured %}
            {% else %}
                {% set visiblePosts = posts | slice(1) %}
            {% endif %}
        {% endif %}
        {% set secondaryFeatured = [] %}
        {% set gridPosts = visiblePosts %}
        {% set defaultCardImage = '/assets/factory/team.webp' %}
        {% if pagination.pageNumber == 0 %}
            {% set secondaryFeatured = visiblePosts | slice(0, 2) %}
            {% set gridPosts = visiblePosts | slice(2) %}
        {% endif %}

        <!-- Featured Article Section - Silicon Labs Style: Clean Layout -->
        {% if pagination.pageNumber == 0 and primaryFeatured %}
        <section aria-labelledby="featured-heading" class="border-b border-brand-border/60">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                {% if secondaryFeatured.length %}
                <div class="grid grid-cols-1 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)] gap-6">
                    <article class="bg-brand-surface border border-brand-border/60 rounded-xl overflow-hidden shadow-sm flex flex-col group" data-post-card data-title="{{ primaryFeatured.data.title | escape }}" data-summary="{{ primaryFeatured.data.summary | escape }}" data-category="{{ primaryFeatured.data.category | slugify }}" data-tags="{{ primaryFeatured.data.tags | contentTags | joinSlugList }}" data-author="{{ primaryFeatured.data.author | default('GateRemoteSource') | escape }}">
                        <div class="grid grid-cols-1 md:grid-cols-2">
                            <div class="relative min-h-[240px] overflow-hidden">
                                <img src="{{ primaryFeatured.data.hero_image | safeImage(defaultCardImage) }}" alt="{{ primaryFeatured.data.hero_alt or primaryFeatured.data.title }}" width="800" height="520" class="w-full h-full object-cover group-hover:scale-105 transition duration-500" fetchpriority="high">
                            </div>
                            <div class="p-6 flex flex-col gap-3">
                                <span class="inline-flex items-center text-xs font-semibold uppercase tracking-wide text-brand-accent bg-brand-light/80 border border-brand-border/60 px-3 py-1 rounded-full">{{ primaryFeatured.data.category }}</span>
                                <h2 id="featured-heading" class="text-2xl md:text-3xl font-bold text-brand-dark leading-tight">
                                    <a href="{{ primaryFeatured.url }}" class="hover:text-brand-accent transition-colors">{{ primaryFeatured.data.title }}</a>
                                </h2>
                                <div class="text-xs text-brand-muted">{{ primaryFeatured.date | readableDate }} | {{ primaryFeatured.data.author or "GateRemoteSource" }} | {{ primaryFeatured.data.read_time }}</div>
                                <p class="text-brand-muted text-sm leading-relaxed line-clamp-3 flex-1">{{ primaryFeatured.data.summary }}</p>
                                <a href="{{ primaryFeatured.url }}" class="mt-auto inline-flex items-center text-brand-accent font-semibold hover:text-brand-hover transition-colors text-sm">
                                    Read Article
                                    <i class="fa-solid fa-arrow-right ml-2 transform group-hover:translate-x-1 transition-transform" aria-hidden="true"></i>
                                </a>
                            </div>
                        </div>
                    </article>
                    <div class="grid grid-cols-1 gap-6">
                        {% for post in secondaryFeatured %}
                        <article class="bg-brand-surface border border-brand-border/60 rounded-xl overflow-hidden shadow-sm flex flex-col group" data-post-card data-title="{{ post.data.title | escape }}" data-summary="{{ post.data.summary | escape }}" data-category="{{ post.data.category | slugify }}" data-tags="{{ post.data.tags | contentTags | joinSlugList }}" data-author="{{ post.data.author | default('GateRemoteSource') | escape }}">
                            <div class="relative h-44 overflow-hidden">
                                <img loading="lazy" decoding="async" src="{{ post.data.hero_image | safeImage(defaultCardImage) }}" alt="{{ post.data.hero_alt or post.data.title }}" width="640" height="400" class="w-full h-full object-cover group-hover:scale-105 transition duration-500">
                            </div>
                            <div class="p-5 flex flex-col gap-3 flex-1">
                                <span class="inline-flex items-center text-xs font-semibold uppercase tracking-wide text-brand-accent bg-brand-light/80 border border-brand-border/60 px-3 py-1 rounded-full">{{ post.data.category }}</span>
                                <h3 class="text-lg font-bold text-brand-dark leading-tight">
                                    <a href="{{ post.url }}" class="hover:text-brand-accent transition-colors">{{ post.data.title }}</a>
                                </h3>
                                <div class="text-xs text-brand-muted">{{ post.date | readableDate }} | {{ post.data.author or "GateRemoteSource" }} | {{ post.data.read_time }}</div>
                                <p class="text-brand-muted text-sm line-clamp-2 flex-1">{{ post.data.summary }}</p>
                                <a href="{{ post.url }}" class="mt-auto inline-flex items-center text-brand-accent font-semibold hover:text-brand-hover transition-colors text-sm">
                                    Read Article
                                    <i class="fa-solid fa-arrow-right ml-2 transform group-hover:translate-x-1 transition-transform" aria-hidden="true"></i>
                                </a>
                            </div>
                        </article>
                        {% endfor %}
                    </div>
                </div>
                {% else %}
                <article class="bg-brand-surface border border-brand-border/60 rounded-xl overflow-hidden shadow-sm flex flex-col group" data-post-card data-title="{{ primaryFeatured.data.title | escape }}" data-summary="{{ primaryFeatured.data.summary | escape }}" data-category="{{ primaryFeatured.data.category | slugify }}" data-tags="{{ primaryFeatured.data.tags | contentTags | joinSlugList }}" data-author="{{ primaryFeatured.data.author | default('GateRemoteSource') | escape }}">
                    <div class="grid grid-cols-1 md:grid-cols-2">
                        <div class="relative min-h-[240px] overflow-hidden">
                            <img src="{{ primaryFeatured.data.hero_image | safeImage(defaultCardImage) }}" alt="{{ primaryFeatured.data.hero_alt or primaryFeatured.data.title }}" width="800" height="520" class="w-full h-full object-cover group-hover:scale-105 transition duration-500" fetchpriority="high">
                        </div>
                        <div class="p-6 flex flex-col gap-3">
                            <span class="inline-flex items-center text-xs font-semibold uppercase tracking-wide text-brand-accent bg-brand-light/80 border border-brand-border/60 px-3 py-1 rounded-full">{{ primaryFeatured.data.category }}</span>
                            <h2 id="featured-heading" class="text-2xl md:text-3xl font-bold text-brand-dark leading-tight">
                                <a href="{{ primaryFeatured.url }}" class="hover:text-brand-accent transition-colors">{{ primaryFeatured.data.title }}</a>
                            </h2>
                            <div class="text-xs text-brand-muted">{{ primaryFeatured.date | readableDate }} | {{ primaryFeatured.data.author or "GateRemoteSource" }} | {{ primaryFeatured.data.read_time }}</div>
                            <p class="text-brand-muted text-sm leading-relaxed line-clamp-3 flex-1">{{ primaryFeatured.data.summary }}</p>
                            <a href="{{ primaryFeatured.url }}" class="mt-auto inline-flex items-center text-brand-accent font-semibold hover:text-brand-hover transition-colors text-sm">
                                Read Article
                                <i class="fa-solid fa-arrow-right ml-2 transform group-hover:translate-x-1 transition-transform" aria-hidden="true"></i>
                            </a>
                        </div>
                    </div>
                </article>
                {% endif %}
            </div>
        </section>
        {% endif %}

        <!-- Article Grid - Silicon Labs Style -->
        <section aria-labelledby="articles-heading">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <h2 id="articles-heading" class="sr-only">Latest Articles</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {% for post in gridPosts %}
                    <article class="bg-brand-surface border border-brand-border/60 rounded-xl overflow-hidden shadow-sm flex flex-col group" data-post-card data-title="{{ post.data.title | escape }}" data-summary="{{ post.data.summary | escape }}" data-category="{{ post.data.category | slugify }}" data-tags="{{ post.data.tags | contentTags | joinSlugList }}" data-author="{{ post.data.author | default('GateRemoteSource') | escape }}">
                        <div class="relative h-48 overflow-hidden">
                            <img loading="lazy" decoding="async" src="{{ post.data.hero_image | safeImage(defaultCardImage) }}" alt="{{ post.data.hero_alt or post.data.title }}" width="640" height="400" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                        </div>
                        <div class="p-5 flex flex-col gap-3 flex-1">
                            <span class="inline-flex items-center text-xs font-semibold uppercase tracking-wide text-brand-accent bg-brand-light/80 border border-brand-border/60 px-3 py-1 rounded-full">{{ post.data.category }}</span>
                            <h3 class="text-lg font-bold text-brand-dark leading-tight">
                                <a href="{{ post.url }}" class="hover:text-brand-accent transition-colors">{{ post.data.title }}</a>
                            </h3>
                            <div class="text-xs text-brand-muted">{{ post.date | readableDate }} | {{ post.data.author or "GateRemoteSource" }} | {{ post.data.read_time }}</div>
                            <p class="text-brand-muted text-sm line-clamp-3 flex-1 leading-relaxed">{{ post.data.summary }}</p>
                            <a href="{{ post.url }}" class="mt-auto inline-flex items-center text-brand-accent font-semibold hover:text-brand-hover transition-colors text-sm">
                                Read Article
                                <i class="fa-solid fa-arrow-right ml-2 transform group-hover:translate-x-1 transition-transform" aria-hidden="true"></i>
                            </a>
                        </div>
                    </article>
                    {% endfor %}
                </div>

                <!-- Empty State -->
                {% if gridPosts.length === 0 %}
                <div class="text-center py-20" role="status" aria-live="polite">
                    <i class="fa-solid fa-search text-5xl text-gray-300 mb-4" aria-hidden="true"></i>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">No articles found</h3>
                    <p class="text-gray-500 mb-6">Try adjusting your search or filter criteria</p>
                    <button type="button" class="bg-brand-accent hover:bg-brand-hover text-white px-6 py-2.5 rounded-md font-medium transition text-sm" data-clear-filters>
                        Clear all filters
                    </button>
                </div>
                {% endif %}
            </div>
        </section>

        <!-- Load More Button or Pagination -->
        {% if pagination.pages.length > 1 %}
        <nav class="max-w-7xl mx-auto px-5 sm:px-6 lg:px-8 py-16" aria-label="Blog pagination">
            <div class="flex justify-center">
                <ul class="flex items-center gap-2" role="list">
                    {% if pagination.previousPageHref %}
                    <li>
                        <a href="{{ pagination.previousPageHref }}" class="w-11 h-11 rounded-xl bg-brand-surface border border-brand-border/40 text-brand-muted/70 hover:border-brand-accent hover:text-brand-dark transition-all duration-200 flex items-center justify-center hover:shadow-md" aria-label="Previous page" rel="prev">
                            <i class="fa-solid fa-chevron-left text-sm" aria-hidden="true"></i>
                            <span class="sr-only">Previous</span>
                        </a>
                    </li>
                    {% endif %}
                    {% for href in pagination.hrefs %}
                    <li>
                        <a href="{{ href }}" class="w-11 h-11 rounded-xl {% if pagination.pageNumber == loop.index0 %}bg-brand-accent text-white font-semibold shadow-md{% else %}bg-brand-surface border border-brand-border/40 text-brand-muted/70 hover:border-brand-accent hover:text-brand-dark hover:shadow-md{% endif %} transition-all duration-200 flex items-center justify-center font-medium text-sm" aria-label="Page {{ loop.index }}" {% if pagination.pageNumber == loop.index0 %}aria-current="page"{% endif %}>
                            {{ loop.index }}
                        </a>
                    </li>
                    {% endfor %}
                    {% if pagination.nextPageHref %}
                    <li>
                        <a href="{{ pagination.nextPageHref }}" class="w-11 h-11 rounded-xl bg-brand-surface border border-brand-border/40 text-brand-muted/70 hover:border-brand-accent hover:text-brand-dark transition-all duration-200 flex items-center justify-center hover:shadow-md" aria-label="Next page" rel="next">
                            <i class="fa-solid fa-chevron-right text-sm" aria-hidden="true"></i>
                            <span class="sr-only">Next</span>
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </nav>
        {% endif %}
    </main>

    <!-- Newsletter Section -->
    <section class="py-20 bg-white border-t border-gray-200" aria-labelledby="newsletter-heading">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 id="newsletter-heading" class="text-4xl font-bold text-gray-900 mb-4 tracking-tight">Stay Updated with Latest Tips</h2>
            <p class="text-gray-600 mb-10 text-lg leading-relaxed">Get weekly technical guides and market insights delivered to your inbox.</p>
            <form id="newsletterForm" class="flex flex-col sm:flex-row gap-4 max-w-lg mx-auto" novalidate>
                <label for="newsletterEmail" class="sr-only">Email address</label>
                <input id="newsletterEmail" name="email" type="email" placeholder="Enter your email" required class="flex-1 bg-white border border-gray-300 rounded-md px-4 py-2.5 text-gray-900 focus:border-brand-accent focus:ring-2 focus:ring-brand-accent/20 outline-none transition-all text-sm placeholder:text-gray-500" aria-required="true">
                <button type="submit" class="btn-primary bg-brand-accent hover:bg-brand-hover text-white px-6 py-2.5 rounded-md font-medium transition shadow-md hover:shadow-lg text-sm">Subscribe</button>
            </form>
            <p id="newsletter-status" class="text-sm text-gray-600 mt-4 hidden" aria-live="polite" role="status"></p>
        </div>
    </section>

    <!-- Pre-Footer CTA -->
    <section class="py-20 bg-gray-50 border-t border-gray-200" aria-labelledby="support-heading">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center justify-between gap-8 text-center md:text-left">
            <div>
                <h2 id="support-heading" class="text-4xl font-bold text-gray-900 mb-3 tracking-tight">Need Technical Support?</h2>
                <p class="text-gray-600 text-lg leading-relaxed">Our engineering team is here to help with your installation challenges.</p>
            </div>
            <a href="/contact/" class="btn-primary bg-brand-accent text-white px-8 py-3 rounded-md font-semibold hover:bg-brand-hover transition shadow-lg shadow-brand-accent/20 text-sm">
                Get Support
            </a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-white pt-20 pb-10 border-t border-gray-200 text-gray-600 text-base" role="contentinfo">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="bg-gray-50 border border-gray-200 rounded-lg p-6 mb-12">
                <p class="text-sm text-gray-500 text-center">
                    Disclaimer: All product names, logos, and brands are property of their respective owners. All company, product and service names used in this website are for identification purposes only. Use of these names, logos, and brands does not imply endorsement.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-12">
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <img src="/logo/logo.png" width="40" height="40" alt="GateRemoteSource logo" class="h-10 w-auto object-contain">
                    </div>
                    <p class="mb-4 text-gray-500">Your Profit Partner in Access Control. Supplying locksmiths worldwide.</p>
                </div>
                <div>
                    <h4 class="text-gray-900 font-bold mb-4">Products</h4>
                    <ul class="space-y-2">
                        <li><a href="/catalog/" class="hover:text-brand-accent transition-colors">Remotes</a></li>
                        <li><a href="/catalog/" class="hover:text-brand-accent transition-colors">Receivers</a></li>
                        <li><a href="/catalog/" class="hover:text-brand-accent transition-colors">Smart Home</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-gray-900 font-bold mb-4">Contact</h4>
                    <ul class="space-y-2">
                        <li><a href="mailto:sales@gateremotesource.com" class="hover:text-brand-accent transition-colors">sales@gateremotesource.com</a></li>
                        <li><a href="https://wa.me/8615899648898" class="hover:text-brand-accent transition-colors" rel="noopener noreferrer" target="_blank">+86 158 9964 8898</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-gray-900 font-bold mb-4">Address</h4>
                    <address class="not-italic flex items-start gap-2 text-gray-600">
                        <i class="fa-solid fa-location-dot mt-1 text-brand-accent" aria-hidden="true"></i>
                        <span>Huawei Kegu Industrial Park, Dalingshan Town, Dongguan, Guangdong, China</span>
                    </address>
                </div>
            </div>
            <div class="text-center pt-8 border-t border-gray-200">
                <span class="text-gray-500">&copy; 2026 GateRemoteSource. All rights reserved.</span>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Button -->
    <a href="https://wa.me/8615899648898" target="_blank" rel="noopener noreferrer" class="whatsapp-float fixed bottom-6 right-6 z-50 bg-brand-accent hover:bg-brand-hover text-white rounded-full p-4 shadow-lg flex items-center justify-center transition transform hover:scale-105" aria-label="Contact us on WhatsApp">
        <i class="fa-brands fa-whatsapp text-4xl" aria-hidden="true"></i>
        <span class="sr-only">Contact us on WhatsApp</span>
    </a>

    <script>
        "use strict";

        const supportedLangs = ['en', 'es', 'de', 'it', 'fr', 'pt'];
        const defaultLang = 'en';
        let currentLanguage = defaultLang;
        let translations = {};

        // Translation functions
        async function loadTranslations(lang) {
            try {
                const response = await fetch(`/locales/${lang}.json`);
                translations = await response.json();
                applyTranslations();
            } catch (error) {
                console.error('Error loading translations:', error);
            }
        }

        function getNestedValue(obj, path) {
            return path.split('.').reduce((current, key) => {
                return current && current[key] !== undefined ? current[key] : null;
            }, obj);
        }

        function applyTranslations() {
            const metaOverride = document.body && document.body.dataset && document.body.dataset.metaOverride === 'true';
            const metaPage = document.body && document.body.dataset ? document.body.dataset.metaPage : '';
            const pageMeta = translations.meta && metaPage && translations.meta[metaPage] ? translations.meta[metaPage] : translations.meta;
            if (metaOverride && pageMeta) {
                if (pageMeta.title) {
                    const titleEl = document.getElementById('meta-title');
                    if (titleEl) titleEl.textContent = pageMeta.title;
                }
                if (pageMeta.description) {
                    const descEl = document.getElementById('meta-description');
                    if (descEl) descEl.content = pageMeta.description;
                }
                if (pageMeta.keywords) {
                    const kwEl = document.getElementById('meta-keywords');
                    if (kwEl) kwEl.content = pageMeta.keywords;
                }
            }

            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                const value = getNestedValue(translations, key);
                if (value !== null && value !== undefined) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = value;
                    } else {
                        element.textContent = value;
                    }
                }
            });
        }

        function stripLangPrefix(pathname) {
            const parts = pathname.split('/');
            if (parts.length > 1 && supportedLangs.includes(parts[1])) {
                const remainder = '/' + parts.slice(2).join('/');
                return remainder === '/' ? '/' : remainder;
            }
            return pathname;
        }

        function getLangFromPath(pathname) {
            const parts = pathname.split('/');
            return parts.length > 1 && supportedLangs.includes(parts[1]) ? parts[1] : null;
        }

        function isBlogPostPath(path) {
            const normalized = path.endsWith('/') ? path : `${path}/`;
            if (normalized === '/blog/' || normalized === '/blog/page/') return false;
            return normalized.startsWith('/blog/') && !normalized.startsWith('/blog/page/');
        }

        function buildLangPath(lang, pathname = window.location.pathname) {
            const cleanPath = stripLangPrefix(pathname);
            if (lang === defaultLang) return cleanPath;
            if (isBlogPostPath(cleanPath)) return `/${lang}/blog/`;
            return cleanPath === '/' ? `/${lang}/` : `/${lang}${cleanPath}`;
        }

        function setLanguageUI(lang) {
            const flags = {
                'en': 'EN',
                'es': 'ES',
                'de': 'DE',
                'it': 'IT',
                'fr': 'FR',
                'pt': 'PT'
            };

            const langNames = {
                'en': 'English',
                'es': 'Español',
                'de': 'Deutsch',
                'it': 'Italiano',
                'fr': 'Français',
                'pt': 'Português'
            };

            const flagElement = document.getElementById('currentFlag');
            const langElement = document.getElementById('currentLang');
            if (flagElement) flagElement.textContent = flags[lang] || flags[defaultLang];
            if (langElement) langElement.textContent = langNames[lang] || langNames[defaultLang];
            document.documentElement.setAttribute('lang', lang);
        }

        function changeLanguage(lang) {
            if (!supportedLangs.includes(lang)) lang = defaultLang;

            const targetPath = buildLangPath(lang, window.location.pathname);
            if (targetPath !== window.location.pathname) {
                const url = new URL(window.location.href);
                url.pathname = targetPath;
                url.searchParams.delete('lang');
                window.location.href = url.toString();
                return;
            }

            currentLanguage = lang;
            setLanguageUI(lang);
            loadTranslations(lang);

            const dropdown = document.getElementById('languageDropdown');
            if (dropdown) {
                dropdown.classList.add('hidden');
                const dropdownBtn = document.getElementById('languageDropdownBtn');
                if (dropdownBtn) {
                    dropdownBtn.setAttribute('aria-expanded', 'false');
                }
            }
        }

        // Mobile menu toggle
        const mobileBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileBtn && mobileMenu) {
            mobileBtn.addEventListener('click', () => {
                const isHidden = mobileMenu.classList.contains('hidden');
                mobileMenu.classList.toggle('hidden');
                mobileBtn.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
            });
        }

        // Language dropdown
        const languageDropdownBtn = document.getElementById('languageDropdownBtn');
        const languageDropdown = document.getElementById('languageDropdown');

        if (languageDropdownBtn && languageDropdown) {
            languageDropdownBtn.addEventListener('click', () => {
                const isHidden = languageDropdown.classList.contains('hidden');
                languageDropdown.classList.toggle('hidden');
                languageDropdownBtn.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', (event) => {
                if (!languageDropdownBtn.contains(event.target) && !languageDropdown.contains(event.target)) {
                    languageDropdown.classList.add('hidden');
                    languageDropdownBtn.setAttribute('aria-expanded', 'false');
                }
            });
        }

        // Newsletter form
        const newsletterForm = document.getElementById('newsletterForm');
        if (newsletterForm) {
            const statusEl = document.getElementById('newsletter-status');
            const emailInput = document.getElementById('newsletterEmail');

            newsletterForm.addEventListener('submit', async (event) => {
                event.preventDefault();

                const emailValue = emailInput ? emailInput.value.trim() : '';
                if (!emailValue || !emailInput.validity.valid) {
                    if (statusEl) {
                        statusEl.classList.remove('hidden');
                        statusEl.textContent = 'Please enter a valid email address.';
                    }
                    return;
                }

                if (statusEl) {
                    statusEl.classList.remove('hidden');
                    statusEl.textContent = 'Sending...';
                }

                try {
                    const formData = new FormData();
                    formData.append('email', emailValue);
                    formData.append('source', 'blog_newsletter');
                    const response = await fetch('https://formspree.io/f/xqakpznl', {
                        method: 'POST',
                        headers: { 'Accept': 'application/json' },
                        body: formData
                    });

                    if (response.ok) {
                        if (statusEl) {
                            statusEl.textContent = 'Thanks! You are subscribed.';
                            statusEl.classList.remove('text-red-600');
                            statusEl.classList.add('text-green-600');
                        }
                        newsletterForm.reset();
                    } else {
                        if (statusEl) {
                            statusEl.textContent = 'Send failed. Please email sales@gateremotesource.com.';
                            statusEl.classList.add('text-red-600');
                        }
                    }
                } catch (error) {
                    if (statusEl) {
                        statusEl.textContent = 'Network issue. Please email sales@gateremotesource.com.';
                        statusEl.classList.add('text-red-600');
                    }
                }
            });
        }

        // Topic Filter Functionality
        const topicFilterBtns = Array.from(document.querySelectorAll('.topic-filter-btn'));
        const searchInput = document.getElementById('blogSearch');
        const articleCards = Array.from(document.querySelectorAll('[data-post-card]'));
        const clearFilterBtns = Array.from(document.querySelectorAll('[data-clear-filters]'));

        function getActiveTopic() {
            const activeTopicBtn = topicFilterBtns.find((btn) => btn.classList.contains('active'));
            return activeTopicBtn ? activeTopicBtn.dataset.topic : 'all';
        }

        function matchesTopic(card, topic) {
            if (topic === 'all') return true;
            const category = (card.dataset.category || '').toLowerCase();
            const tags = (card.dataset.tags || '').toLowerCase();
            const tokens = new Set(`${category}|${tags}`.split('|').filter(Boolean));
            return tokens.has(topic);
        }

        function matchesSearch(card, query) {
            if (!query) return true;
            const haystack = [
                card.dataset.title || '',
                card.dataset.summary || '',
                card.dataset.category || '',
                card.dataset.tags || '',
                card.dataset.author || ''
            ].join(' ').toLowerCase();
            return haystack.includes(query);
        }

        function filterArticles() {
            const activeTopic = getActiveTopic();
            const searchQuery = searchInput ? searchInput.value.toLowerCase().trim() : '';

            articleCards.forEach(card => {
                const visible = matchesTopic(card, activeTopic) && matchesSearch(card, searchQuery);
                card.classList.toggle('hidden', !visible);
            });
        }

        topicFilterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                topicFilterBtns.forEach(b => {
                    b.classList.remove('active');
                    b.setAttribute('aria-pressed', 'false');
                });
                btn.classList.add('active');
                btn.setAttribute('aria-pressed', 'true');
                filterArticles();
            });
        });

        if (searchInput) {
            searchInput.addEventListener('input', filterArticles);
        }

        clearFilterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                topicFilterBtns.forEach(b => {
                    b.classList.remove('active');
                    b.setAttribute('aria-pressed', 'false');
                });
                const allBtn = document.querySelector('.topic-filter-btn[data-topic="all"]');
                if (allBtn) {
                    allBtn.classList.add('active');
                    allBtn.setAttribute('aria-pressed', 'true');
                }
                if (searchInput) searchInput.value = '';
                filterArticles();
            });
        });

        // Language initialization
        const url = new URL(window.location.href);
        const paramLang = url.searchParams.get('lang');
        let redirecting = false;
        if (supportedLangs.includes(paramLang)) {
            const targetPath = buildLangPath(paramLang, url.pathname);
            url.searchParams.delete('lang');
            if (targetPath !== url.pathname) {
                url.pathname = targetPath;
                window.location.replace(url.toString());
                redirecting = true;
            } else if (history.replaceState) {
                history.replaceState(null, '', url.toString());
            }
        }

        if (!redirecting) {
            const initialLang = getLangFromPath(window.location.pathname) || defaultLang;
            currentLanguage = initialLang;
            setLanguageUI(initialLang);
            loadTranslations(initialLang);
        }

        // Initialize filters on page load
        filterArticles();
    </script>
</body>
</html>
